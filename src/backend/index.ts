//import { Radar } from "./Radar";
import { RadarPlayer } from "./RadarPlayer";
/*import { RadarRecorder } from "./RadarRecorder";
import { FftData, HitData } from "./containers";
import { HitFinder } from "./hit_finder";
import { HitSelector } from "./hit_selector";
import { HitToDistance } from "./hit_to_distance";*/

//const radar = new Radar("COM3");
const radar = new RadarPlayer("sample.dat", true);

const stream = radar.getFftDataStream();

stream.on("data", (data) => 
{
    console.log(data.toString());
});

//let recorder = new RadarRecorder();
//recorder.record();

/*let data = new FftData([30.91234,1.5,30.005,0,0,0,0,0,0,0,0,0,0,0,0,330.779,376.688,510.382,608.456,467.109,0,707.816,1580.966,2156.125,2657.833,3712.314,5312.086,6827.821,7744.57,7899.833,7403.805,6442.484,5155.684,3720.587,2446.751,1670.737,889.257,128.58,427.702,715.552,916.648,980.811,794.89,530.251,405.262,355.416,387.497,507.571,530.609,382.305,433.413,791.039,1070.308,1196.522,1220.688,1173.167,1029.117,775.808,470.254,237.698,237.252,322.629,338.156,243.585,99.957,247.585,392.435,386.178,284.361,256.679,270.754,207.662,108.872,27.332,83.348,214.136,284.591,249.055,140.505,59.913,83.75,77.565,48.296,107.593,187.335,228.633,208.847,136.943,74.514,107.399,142.047,145.28,134.802,125.912,118.558,107.589,96.468,96.762,116.083,141.549,146.498,117.115,66.674,34.586,33.603,19.45,41.849,82.332,107.118,118.179,127.295,131.951,119.232,83.526,33.6,38.471,78.775,91.03,69.358,29.595,4.646,10.154,35.717,67.975,82.094,78.703,86.376,122.322,165.522,190.972,182.314,140.467,88.569,60.752,59.275,60.273,56.874,51.428,54.323,51.146,21.795,28.987,73.5,93.924,92.372,87.037,85.33,74.566,46.031,17.047,49.552,85.018,108.565,119.1,115.974,98.626,70.529,41.131,20.905,9.392,13.719,31.982,44.123,43.49,32.686,22.152,22.162,29.043,41.804,63.507,89.885,111.214,119.463,112.811,95.051,72.574,52.515,42.253,45.512,56.277,65.622,67.859,62.239,52.907,44.904,38.598,32.095,25.321,17.994,11.923,12.889,15.581,12.467,11.869,31.38,55.877,76.807,88.036,84.64,66.46,41.398,27.983,40.482,58.08,67.17,61.182,41.044,19.483,16.133,11.955,10.839,28.001,34.883,27.536,13.117,3.182,6.602,5.987,3.296,6.751,18.163,32.451,42.633,43.958,37.252,28.815,28.464,37.122,46.438,51.186,48.927,39.19,24.136,13.301,24.168,36.685,39.429,30.98,17.151,9.729,9.923,7.367,11.398,19.511,23.884,22.785,17.492,12.922,13.857,15.975,17.34,20.495,25.24,29.423,32.772,35.035,33.616,27.09,20.241,20.812,23.774,21.852,14.745,8.747,13.217,17.424,16.108,11.665,9.423,13.001,20.93,28.534,33.24,36.947,40.802,42.024,39.425,35.302,31.758,30.494,32.793,34.947,32.548,26.066,19.325,14.822,11.779,8.681,4.844,2.749,9.135,18.762,30.492,41.223,46.141,42.712,33.012,22.104,15.917,18.186,24.032,29.513,33.818,35.515,32.573,25.189,16.862,11.641,8.089,3.505,8.313,13.81,13.491,10.837,15.344,20.859,21.089,16.247,9.322,6.775,11.697,14.97,12.533,6.371,15.91,30.06,38.631,39.498,36.042,32.912,30.649,27.523,23.581,20.231,17.558,13.111,4.563,7.308,18.353,24.453,24.997,23.049,21.833,21.809,21.355,19.672,17.987,17.807,19.052,20.16,20.272,20.123,20.283,20.512,20.264,18.72,15.549,11.967,11.01,13.256,15.43,15.573,13.261,9.31,8.063,12.953,18.41,20.941,19.653,15.826,12.242,11.297,13.636,18.914,25.12,28.616,26.495,19.359,12.613,11.857,11.733,7.812,2.245,6.721,11.336,13.367,13.225,10.767,8.454,13.329,19.965,22.114,18.439,11.232,4.92,3.97,4.275,3.66,4.385,8.684,14.511,18.14,16.771,10.26,1.217,7.469,12.833,14.686,14.117,12.521,10.549,8.366,7.119,7.141,6.345,4.636,4.775,6.916,8.531,7.961,5.582,5.896,9.212,11.824,13.473,14.508,14.436,12.643,9.426,6.095,3.843,2.691,2.623,3.887,5.462,6.543,8.494,12.374,16.293,18.36,17.991,15.494,11.837,9.091,8.842,9.941,12.09,14.69,16.036,16.036,16.199,16.813,16.303,13.743,10.073,7.131,5.276,2.906,2.26,7.912,14.213,18.851,20.07,17.654,13.025,8.055,3.943,3.94,7.608,10.138,9.913,6.868,2.353,3.638,7.405,9.225,8.815,6.783,4.092,1.292,2.202,5.294,7.08,6.232,2.815,2.165,5.089,5.77,5.641,6.604,7.22,5.898,2.759,1.406,4.489,5.932,5.576,5.123,6.85,9.587,11.682,12.822,13.59,14.123,13.303,10.181,5.505,2.59,4.026,5.402,7.38,10.007]);

let dataBuffer = data.toBuffer();

let new_data = new FftData(dataBuffer);

console.log(data.toString(), new_data.toString());*/

//writableStream.write(data.toString(), new_data.toString());



/*stream
    .pipe(new HitFinder())
    .pipe(new HitSelector())
    .pipe(new HitToDistance())
    .on('data', (data: HitData) => {
        console.log(data);
    });*/